# 8 USER PROFILE

이제 edit profile 페이지를 만들어 보자

```js
export const getEdit = (req, res) => {
  return res.render("edit-profile", { pageTitle: "Edit Profile" });
};
export const postEdit = (req, res) => {
  return res.render("edit-profile");
};
```

```js
userRouter.route("/edit").get(getEdit).post(postEdit);
```

```pug
if loggedIn
    li
        a(href="/users/edit")  Edit Profile
    li
        a(href="/users/logout")  Log Out
    li
        a(href="/my-profile") #{loggedInUser.name}의 Profile
```

`edit-profile.pug`

```pug
form(method="POST")
    input(placeholder="Name", name="name", type="text", required, value=loggedInUser.name)
    input(placeholder="Email", name="email", type="email", required, value=loggedInUser.email)
    input(placeholder="Username", name="username", type="text", required, value=loggedInUser.username)
    input(placeholder="Location", name="location", type="text", required, value=loggedInUser.location)
    input(type="submit", value="Update Profile")
```

`middlewares.js`

```js
export const localsMiddleware = (req, res, next) => {
  res.locals.loggedIn = Boolean(req.session.loggedIn);
  res.locals.siteName = "Wetube";
  res.locals.loggedInUser = req.session.user || {};
  next();
};
```

이렇게 해서 해당 로그인 값을 세션을 통해 가져와

form value 값에 넣어 줄 수 있다.

또 로그인 하지 않고 들어 왔을 시에 `||` 를 미들웨어에 추가하므로써

실행되도록 함
