# 6 MONGODB AND MONGOOSE

## 6.0 Array Database part One

우리는

1. 동영상 배치

2. 선택한 영상 시청

3. 동영상 업로드, 수정

우선 가짜 DB를 만들어서 해당 기능을 구현 해보자

```js
let videos = [
  {
    title: "First Video",
    rating: 5,
    comments: 2,
    createdAt: "2 minutes ago",
    views: 59,
    id: 1,
  },
  {
    title: "Second Video",
    rating: 5,
    comments: 2,
    createdAt: "2 minutes ago",
    views: 59,
    id: 2,
  },
  {
    title: "Third Video",
    rating: 5,
    comments: 2,
    createdAt: "2 minutes ago",
    views: 59,
    id: 3,
  },
  {
    title: "Fourth Video",
    rating: 5,
    comments: 2,
    createdAt: "2 minutes ago",
    views: 59,
    id: 4,
  },
];
```

1 번은 이미 구현 했으니 2번을 해보자

```
https://localhost:4000/video/idNum
```

우리는 보고 싶은 영상을 눌러 해당 영상 주소로 가게 구현을 할꺼임

```pug
mixin video(info)
    div
        h4
            a(href=`/videos/${info.id}`)=info.title
        ul
            li #{info.rating}/5.
            li #{info.comments} comments.
            li Posted #{info.createdAt}.
            li #{info.views} views.
```

이러고 `videoController.js` 의 `see`

```js
export const see = (req, res) => {
  console.log(req.params);
  return res.render("watch");
};
```

콘솔값이

```
{ id: '1' }
GET /videos/1 200 22.436 ms - 243
```

해당 아이디값을 불러내고 있음

```js
export const see = (req, res) => {
  const { id } = req.params;
  // const id = req.params.id; 랑 같음

  const video = videos[id - 1];
  return res.render("watch", { pageTitle: `Watching ${video.title}` });
};
```

## 6.1 Array Database part Two

이제 video 정보 그대로 보내면

```js
export const see = (req, res) => {
  const { id } = req.params;
  // const id = req.params.id; 랑 같음

  const video = videos[id - 1];
  return res.render("watch", { pageTitle: `Watching ${video.title}`, video });

  //   return res.render("watch", { pageTitle: `Watching ${video.title}`, video }

  // == video: video
};
```

`watch.pug`

```pug
extends base.pug


block content
    h1=video.title

```

조건문을 이용하여 1 view 일때를 구현하면

```pug
extends base.pug


block content
    h1 #{video.views} #{video.views === 1 ? "view":"views"}
```

이제 영상 수정 페이지를 구현해보자
