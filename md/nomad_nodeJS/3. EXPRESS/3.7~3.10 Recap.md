## 3.7 Setup Recap

**Setup ë³µìŠµ**

- ëª¨ë“ ê±´ `package.json` ì—ì„œ ì‹œì‘

- `package.json` ì€ node.js ì •ë³´ë¥¼ ë‹´ëŠ” ë°©ë²•

- package.json ì— ë„£ìœ¼ë©´ `npm` ì´ ì–´ë–¤ í–‰ë™ì„ í•˜ê²Œ í•´ì£¼ëŠ” ê²ƒë“¤ì´ ìˆëŠ”ë°

- ê·¸ì¤‘ì— `scripts` ì„ ì…ë ¥í•˜ë©´ ì½˜ì†”ì— `npm run (scripts name)` ì„ ì‚¬ìš© í•  ìˆ˜ ìˆìŒ

- `dependencies` ëŠ” í”„ë¡œì íŠ¸ê°€ ëŒì•„ê°€ê¸° ìœ„í•´ í•„ìš”í•œ package ëª©ë¡ë“¤ì„

  express ë¥¼ ì„¤ì¹˜ í• ë•Œ ìë™ìœ¼ë¡œ ì„¤ì¹˜ ë¨

- `devDependencies`ëŠ” ê°œë°œìê°€ ê°œë°œí• ë•Œ í•„ìš”í•œ ê²ƒë“¤

  êµ¬ë¶„ì„ ìœ„í•œ ê±° dependenciesë‘ ì‹¤ì§ˆì ìœ¼ë¡œ ê°™ìŒ

<br><br>

## 3.8 Servers Recap

**Servers ë³µìŠµ**

ì„œë²„ì™€ routes ëŠ” ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ê°€

- ì„œë²„ëŠ” í•­ìƒ ì¼œì ¸ ìˆê³  ì¸í„°ë„·ì— ì—°ê²°ë˜ì–´ ìˆìœ¼ë©°, requestë¥¼ listening í•˜ê³  ìˆëŠ” ì»´í“¨í„°ë‹¤

- request ëŠ” ìš°ë¦¬ê°€ ì„œë²„ì—ê²Œ ìš”ì²­í•˜ëŠ” ê²ƒë“¤

  ë¸Œë¼ìš°ì €ë¥¼ í†µí•œ ëª¨ë“  ìƒí˜¸ì‘ìš©ì´ request

  ì¦‰ ì‚¬ìš©ìëŠ” ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ requestë¥¼ ë³´ë‚´ëŠ”ê±°ì„

  ì‚¬ìš©ìì˜ í–‰ë™ì„ listening í•˜ê³  ìˆëŠ” ì„œë²„ì—ë§Œ request ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŒ

- import ë¡œ `express`ë¥¼ ë°›ì•„ app ë³€ìˆ˜ì— ë‹´ìœ¼ë©´ express ë¥¼ ì“¸ ìˆ˜ ìˆìŒ

- `port`ëŠ” ì°½ë¬¸ê³¼ ê°™ìŒ

  ì„œë²„ëŠ” ì‚¬ìš©ìì˜ ì»´í“¨í„° ì „ì²´ë¥¼ listen í•  ìˆ˜ ì—†ìŒ

  ê·¸ë˜ì„œ `port` ë¥¼ ì„¤ì •í•˜ì—¬ í•´ë‹¹ `port` ë¡œ ì£¼ê³  ë°›ëŠ”ê±°ì„

- ì„œë²„ëŠ” ì¢…ë£Œí•˜ê¸° ì „ê¹Œì§€ ê³„ì†í•´ì„œ listening í•˜ê³  ìˆìŒ

- `GET` method ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ method

- app.getì€ 2ê°œì˜ argument ë¥¼ ë°›ìŒ

  í•˜ë‚˜ëŠ” ì£¼ì†Œê³ , ë‘˜ì€ handler (í•¨ìˆ˜)

- í•¨ìˆ˜ëŠ” ë­”ê°€ë¥¼ `return` í•´ì¤˜ì•¼í•¨

<br><br>

## 3.9 Controllers Recap

- controllerë¼ê³  ë¶ˆë¦¬ëŠ” ëª¨ë“  hanblerì—ëŠ” `request`ì™€ `response` ê°€ ìˆìŒ

  `next`ë„ ìˆì§€ë§Œ ê·¸ê±´ 3.10ì—ì„œ ë‹¤ë£°êº¼ì„

- express ê°€ request object ë¥¼ ì œê³µí•˜ì—¬ cookies, ë¸Œë¼ìš°ì € ì •ë³´, ip ì£¼ì†Œ ê°™ì€ request ì™€ ê´€ë ¨ëœ ì •ë³´ ê°€ ìˆìŒ

- `res.end()` ëŠ” ì—°ê²°ì„ ì¢…ë£Œ ì‹œí‚´

- `res.send()` ëŠ” ë¬´ì–¸ê°€ë¥¼ ë³´ë‚´ëŠ” ê±° txt, json, html ë‹¤ì–‘í•˜ê²Œ ê°€ëŠ¥

- ì„œë²„ëŠ” request ë¥¼ ë°›ìœ¼ë©´ ë°˜ë“œì‹œ response ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤. ë¸Œë¼ìš°ì € ë¬´í•œ ë¡œë”©ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

- HTTP request ëŠ” ì–´ë–¤ route(url) ì— ëŒ€í•œ HTTP Method ìš”ì²­ì´ê³  ì„œë²„ëŠ” ê·¸ ìš”ì²­ì— ëŒ€í•œ response ë¥¼ í•´ì£¼ì–´ì•¼í•œë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì´ ë˜ `controller`ì´ë‹¤.

<br><br>

## 3.10 Middleware Recap

- MiddlewareëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ request ì²˜ë¦¬ ì‘ì—…ì„ ì™„ë£Œí•˜ê³  response ë¥¼ ì „ë‹¬í•˜ê¸° ì „ì— request ì²˜ë¦¬ë¥¼ ë„ì™€ì£¼ëŠ” ì½œë°±í•¨ìˆ˜ì´ë‹¤.

- MiddlewareëŠ” request ì˜¤ë¸Œì íŠ¸ì™€, response ì˜¤ë¸Œì íŠ¸ ë§ê³ ë„ `next` íŒŒë¼ë¯¸í„°ë¥¼ ê°–ëŠ”ë‹¤.

- `next` íŒŒë¼ë¯¸í„°ëŠ” ë‹¤ìŒìœ¼ë¡œ request ë¥¼ ì²˜ë¦¬í•  ì½œë°±í•¨ìˆ˜ë¥¼ ë‹´ê³ ìˆë‹¤.

<br><br>

## 3.11 External Middlewares

1.  Morgan

         node.js ìš© request logger middleware

morgan ì„¤ì¹˜

    npm i morgan

```js
import express from "express";
import morgan from "morgan";

const PORT = 4000;

const app = express();
const logger = morgan("dev");

const home = (req, res, next) => {
  console.log("I will respond.");
  return res.send("home");
};

const login = (req, res) => {
  return res.send("login");
};

app.use(logger);
app.get("/", home);
app.get("/login", login);

const handleListening = () =>
  console.log(`âœ… Server listenting on port http://localhost:${PORT} ğŸš€`);

app.listen(PORT, handleListening);
```

ì´ë ‡ê²Œ í•˜ë©´

```
âœ… Server listenting on port http://localhost:4000 ğŸš€
I will respond.
GET / 200 11.817 ms - 4
GET /favicon.ico 404 6.193 ms - 150
```

ì´ë ‡ê²Œ GET, path, status code ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒ

```js
const logger = morgan("dev");
```

ì´ê±° ë§ê³ ë„

```js
const logger = morgan("combined");
const logger = morgan("common");
const logger = morgan("short");
```

ë“±ìœ¼ë¡œ ì§€ì •í•´ì„œ ì‚¬ìš© ê°€ëŠ¥
