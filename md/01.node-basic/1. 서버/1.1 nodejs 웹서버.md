# 1 서버

## 1.1 nodejs 웹서버

웹 브라우저가 있고 웹 서버가 있으면

주소를 입력하고 요청을 하면

웹 서버는 그 요청에 따른 정보를 찾아서 응답해주는 관계임

이러한 웹 서버는 아파치, 엔진X, iis 같은것들이 있음

그리고 nodejs 도 웹 서버로서의 기능을 가지고 있음

그거에 대해 배워 볼꺼임

`main.js`

```js
var http = require("http");
var fs = require("fs");
var app = http.createServer(function (request, response) {
  var url = request.url;
  if (request.url == "/") {
    url = "/index.html";
  }
  if (request.url == "/favicon.ico") {
    return response.writeHead(404);
  }
  response.writeHead(200);
  response.end(fs.readFileSync(__dirname + url));
});
app.listen(3000);
```

```
node main.js
```

실행하면

localhost:3000 에 딱 서버가 활성화된것을 확인할 수 있음

여기서

```js
console.log(__dirname + url);
```

요러면

`/private/tmp/web2-nodejs/2.html`

라고 출력함

/private/tmp/web2-nodejs/ 는 main.js 가 위치해 있는 디렉토리이고

2.html 은 사용자가 요청한 url 값임

```js
response.end("HI" + url));
```

라고 하면 HI + url 값을 출력함

nodejs 서버는 저기에 뭘 박느냐에 따라 사용자에게 전송하는 데이터가 바뀌는거임

즉 프로그래밍적으로 사용자에게 전송할 데이터를 생성한다 라는 것을

아파치는 못하는데 노드, php, 장고는 가능함

## 1.2 url

자 우리 web 으로 하고 싶은거는 우리가 만든 페이지를 사용자들에게 보여주는 것이지

무슨 내용의 페이지를 보여줄 것인가를 결정하는것은 url임

```
https://localhost/?id=HTML
```

여기서 id값을 무엇이냐에 따라 사용자에게 해당 id 값에 맞는 페이지값을 전달해줄 수 있음

해당 부분을 `쿼리스트링`이라 함

```js
var http = require("http");
var fs = require("fs");
var url = require("url");

var app = http.createServer(function (request, response) {
  var _url = request.url;
  var queryData = url.parse(_url, true).query;
  console.log(queryData.id);
  if (_url == "/") {
    _url = "/index.html";
  }
  if (_url == "/favicon.ico") {
    return response.writeHead(404);
  }
  response.writeHead(200);
  response.end(queryData.id);
});
app.listen(3000);
```
